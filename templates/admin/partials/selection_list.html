<!-- templates/admin/partials/selection_list.html -->
{% include "admin/partials/toast.html" %}

<!-- Quick Actions Bar - Contextual based on state -->
<div class="flex gap-2 mb-4">
    {% if not selection.flavors.exists %}
        <!-- Empty state: Show copy from yesterday -->
        <button
            hx-post="{% url 'flavors:admin_copy_yesterday' %}"
            hx-target="#selection-container"
            hx-swap="innerHTML"
            hx-indicator="this"
            hx-disabled-elt="this"
            class="flex-1 bg-blue-600 text-white px-4 py-3 rounded-lg font-medium min-h-[48px] hover:bg-blue-700 transition-colors"
        >
            Kopiuj z wczoraj
        </button>
    {% else %}
        <!-- Has flavors: Show sort button and clear -->
        <button
            hx-get="{% url 'flavors:admin_daily_selection_sort' %}"
            hx-target="#selection-container"
            hx-indicator="this"
            hx-disabled-elt="this"
            class="flex-1 bg-white border border-gray-300 text-gray-700 px-4 py-3 rounded-lg font-medium min-h-[48px] hover:bg-gray-50 transition-colors flex items-center justify-center gap-2"
        >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
            Zmień kolejność
        </button>
        <button
            hx-post="{% url 'flavors:admin_clear_selection' %}"
            hx-target="#selection-container"
            hx-confirm="Wyczyścić wszystkie smaki?"
            hx-indicator="this"
            hx-disabled-elt="this"
            class="px-4 py-3 text-red-600 border border-red-200 rounded-lg font-medium min-h-[48px] hover:bg-red-50 transition-colors"
        >
            Wyczyść
        </button>
    {% endif %}
</div>

<!-- Selection Info -->
<div class="text-sm text-gray-500 mb-4">
    Wybrano: {{ selection.flavors.count }} z {{ all_flavors|length }} smaków
    {% if selection.hit_of_the_day %}
        | Hit: {{ selection.hit_of_the_day.name }}
    {% endif %}
</div>

<!-- Flavor List -->
<div class="border rounded-lg overflow-hidden bg-white shadow-sm">
    {% for item in flavors %}
        {% with flavor=item.flavor is_selected=item.is_selected %}
        {% include "admin/partials/flavor_select_row.html" %}
        {% endwith %}
    {% empty %}
        <div class="p-8 text-center text-gray-500">
            <p class="mb-2">Brak aktywnych smaków w bazie.</p>
            <a href="{% url 'flavors:admin_flavor_create' %}" class="text-green-600 hover:text-green-700 font-medium hover:underline transition-colors">
                Dodaj pierwszy smak
            </a>
        </div>
    {% endfor %}
</div>
